<!-- output file generated by BM Utilities -->
<html>
<head>
<title>
IBM Certification Study Guide  AIX V4.3 System Support
</title>
</head>
<body bgcolor=#f0f0f0><a name="htmltop"></a>
<p><a href="./5139fm.htm#toconfH5"><img src="f2htoc.gif"></a>
<a href="./5139indx.htm"><img src="f2hindex.gif"></a>
<a href="5139c44.htm#htmlbot"><img src="f2hbot.gif"></a>
<a href="5139c43.htm#htmlbot"><img src="f2hprev.gif">4.3  Displaying Installed
Devices</a><br>

<h2><a name="onfH8">4.4  Configuring New Devices</a>
</h2>

<p><a name=index322>Depending</a> on the kind of device you plan to configure,
you will go through a different sequence of configuration steps. PCI device
configuration and ISA device configuration differs considerably. The following
sections discuss the various configuration approaches.

<h3><a name="onfH9">4.4.1  PCI Device Configuration</a>
</h3>

<p><a name=index326>If</a> you add a new PCI or SCSI device to your system, the
system will automatically configure the device (provided no conflict is found
in case of SCSI <a name=index332>devices,</a> for example the same SCSI ID for
two different SCSI devices) at system restart or by using the <tt>cfgmgr</tt>
command provided the required device drivers are installed.
<p>When <a name=index336>using</a> PCI adapters, the slot number is as
important as it is in microchannel devices. If you change the adapter from slot
A to slot B, the original adapter information for slot A will be kept in
defined state and a new definition will be created for slot B and a new device
will be configured.

<h3><a name="onfH10">4.4.2  ISA Device Configuration</a>
</h3>

<p><a name=index340>Devices</a> like PCI or Micro Channel integrated devices
such as SCSI controllers, integrated ISA devices like keyboard, mouse, and
audio are self configuring. However non-integrated ISA devices such as adapters
plugged into ISA slots, should be configured manually.
<p>In the case of ISA devices, five resources should be managed before your
system can run smoothly. These five resources are:
<ul>
<li>Bus <a name=index344>I/O</a> ranges
<p><li>Bus memory address ranges
<p><li>System interrupts (IRQ)
<p><li>Direct Memory Access (DMA) channels
<p><li>Bus memory DMA address ranges
</ul>
<p>These settings must be different for all ISA adapters to avoid conflicts
otherwise you will not be able to use the adapter. If these resources cannot be
dynamically set, they must be set by adjusting switches or jumpers on the
adapter. In case the adapter does not have switches, you may need a System
Management Services (SMS) disk to configure the adapter.
<p>The first step is to install the device drivers for ISA adapters if you have
not already done so. In order to check whether device support for ISA has been
installed, use the <tt>lsdev</tt> command as shown in
<a href="#12858">Figure 18</a>:
<br><br><a name=12858>
<br>
<table border=2 bgcolor=#f0f0f0  width=100%><tr><td>
<pre>
<b># lsdev -Pc adapter -s isa</b>
adapter tokenring  isa IBM 16/4 PowerPC Token-Ring Adapter (isa)
adapter portmaster isa Multiport Model 2 Adapter
adapter ethernet   isa IBM ISA Ethernet Adapter
adapter articmpx   isa X.25 CoProcessor/1 Adapter
adapter pcxr       isa IBM 8-Port Async, EIA-232 (ISA)
adapter pc8s       isa IBM 8-Port EIA-232/RS-422A (ISA) Adapter
adapter cxia       isa IBM 128-Port Async, EIA-232 (ISA)
</pre>
</a>
</td></tr></table><i>Figure 18: Checking ISA Device Support</i><br><br>
<p><a name=index360>This</a> provides you with a list of all the adapters that
have been defined in the predefined ODM database. If you see a blank display
when you run this command you need to install the support for ISA adapters.

<h4><a name="onfH12">4.4.2.1  Installing Device Drivers for ISA Devices</a>
</h4>

<p><a name=index364>In</a> order to install device support for ISA devices
follow the SMIT fastpath:
<ol>
<li><tt>smitty devinst_isa</tt>
<p><li><a name=index368>Select</a> the devices.isa
<a name=index370>fileset.</a> By default it is already entered in the field.
<p><li>The device support for ISA devices will be installed once the command
finishes execution.
</ol>

<h4><a name="onfH13">4.4.2.2  Recording Settings of Already Configured ISA
Adapters</a>
</h4>

<p><a name=index372>ISA</a> devices may not work properly if there are clashes
in their settings suxh as IRQ or bus I/O ranges. It is best to note all the
settings of any ISA devices already present in your system. In order to do
that, issue the following command:
<pre>
lsdev -Cc adapter -s isa
</pre>
<p>This command will show you all the ISA devices that are already configured
with your system. The output of this command will be similar to:
<br><br>
<img src="onfi6.gif">
<br><i>Figure 19: Finding Out Currently Defined Devices</i><br><br>
<p>Once you have the names of the ISA devices that are configured on your
system use either the <tt>lsresource</tt> <a name=index375>command</a> or the
<tt>lsattr</tt> command to get the current settings of your ISA devices. The
<tt>lsresource</tt> command writes a list of assigned bus resources to standard
out, or determines if the bus resources for devices resolve. On the command
line enter:
<pre>
lsresource -l apm0
</pre>
<p>An output similar to <a href="#17163">Figure 20</a> will be shown:
<br><br><a name=17163>
<br>
<img src="onfi12.gif"></a>
<br><i>Figure 20: Finding Out Current Resource Settings Using
lsresource</i><br><br>
<p>Use <tt>lsattr</tt> command to find out the current settings of all of your
ISA devices. The <tt>lsattr</tt> command displays information about the
attributes of a given device or kind of device. Use the <tt>lsattr</tt> command
as shown in <a href="#13713">Figure 21</a>.
<br><br><a name=13713>
<br>
<img src="onfi13.gif"></a>
<br><i>Figure 21: Finding Out Current Resource Settings Using
lsattr</i><br><br>
<p>Once you have the current values for the installed devices, refer to your
device documentation and select the recommended values for the device to work
properly. Next configure the adapter using the SMIT fastpath:
<ol>
<li><tt>smitty isa</tt>
</ol>
<p><a name=index382>A</a> screen similar to <a href="#36710">Figure 22</a> will
be shown:
<br><br><a name=36710>
<br>
<img src="onfi14.gif"></a>
<br><i>Figure 22: SMIT ISA Adapter Options</i><br><br>
<ol>
<li>Select <b>Add an ISA Adapter</b> <a name=index384>and</a> press
<b>Enter</b>. A screen similar to <a href="#41247">Figure 23</a> will be shown:
<br><br><a name=41247>
<br>
<img src="onfi15.gif"></a>
<br><i>Figure 23: Adding an ISA Adapter - Step 1</i><br><br>
<br><br>

<p><table border=2 bgcolor=#f0f0f0  width=100%><tr><th align=left>Note</th><tr><td>
<p>You can try to configure the adapter without actually installing it since
some adapters may have DIP switches that you may have to set in order to get
the right settings. If you try to configure an adapter, for example an X.25
adapter that has not been installed, and there are no parameter conflicts you
will be given a message as follows:
<pre>
ampx0 Defined
Method error (/usr/lib/methods/cfgc1x):
0514-047 Cannot access a device.
[busquery]ioctl(): Function not implemented
ampx0 deleted
</pre>
<p>This shows that you have configured the adapter correctly except that you
still must actually install it.
</td></tr></table>
<br><br>
<p><li>Select the adapter you want to add (assume that you are trying to
configure a Multiport Model 2 adapter) and press <b>Enter</b>. A screen similar
to <a href="#12472">Figure 24</a> is shown:
<br><br><a name=12472>
<br>
<img src="onfi19.gif"></a>
<br><i>Figure 24: Adding an ISA Adapter - Step 2</i><br><br>
<p><li>Change any input fields required and press <b>Enter</b> once you are
done. If your given values conflict with some other ISA device, a message
similar to <a href="#22596">Figure 25</a> will be shown:
<br><br><a name=22596>
<br>
<img src="onfi20.gif"></a>
<br><i>Figure 25: ISA Adapter Resource Conflict</i><br><br>
<p><li>Go back to the previous screen and correct the values accordingly.
</ol>
<p>You have successfully configured an ISA adapter.

<h3><a name="onfH22">4.4.3  128-Port Asynchronous Adapter Considerations</a>
</h3>

<p><a name=index387>The</a> 128-port asynchronous adapter subsystem meets the
multiuser requirements for workstations in the open system environment. The
subsystem can support up to 128 devices and offers higher speeds to the end
user. It is an intelligent adapter with the ability to offload line protocol
processing from the operating system.
<p>The 128-port product consists of an adapter card, up to eight remote
asynchronous node (RAN) units, each supporting 16 devices, for a total of 128
devices per adapter. The 128-port asynchronous adapter card resides in the
system unit, and is connected by either EIA 422, direct cabling, EIA 422/EIA
232 synchronous modems, or Data Service Unit/Channel Service Units (DSU/CSUs)
to the RAN. The number of 128-port asynchronous adapters that can be installed
is dependent on the number of slots available in the system with a hardware
limit of seven adapters per bus (an optional I/O bus can provide eight
additional slots).
<p>Each 128-port asynchronous adapter has two synchronous lines. Up to four
RANs can be connected to a single synchronous line in daisy-chain fashion. That
is, the first RAN is connected to one of the adapter's lines, the second RAN is
connected to the first RAN, and so on (up to four RANs).
<p>The RANs can be attached to the 128-port adapter with a direct local
connection, a synchronous modem connection, or a combination of the two.
<a href="#33200">Figure 26</a> shows some of the possible connection types.
<br><br><a name=33200>
<br>
<img src="onfi21.gif"></a>
<br><i>Figure 26: 128-Port Asynchronous Adapter Connection
Combinations</i><br><br>
<p>The <a name=index390>adapter</a> identifies <a name=index394>RANs</a> by
their node numbers. Each RAN in a daisy chain must have a unique node number
(1n through 4n), which must be set during installation. The node numbers must
be assigned in ascending order with the lowest number assigned to the RAN
closest to the adapter. You can skip node numbers (to facilitate insertion of
additional RANs at a later date), as long as the ascending sequence is
maintained. <a href="#41435">Figure 27</a> summarizes the node number
assignment.
<br><br><a name=41435>
<br>
<img src="onfi22.gif"></a>
<br><i>Figure 27: RAN Numbering</i><br><br>
<p>The remote asynchronous node (RAN) is equipped with:
<ul>
<li>Ten LED indicators
<p><li>Two-digit, seven-segment LED display
<p><li>Two push buttons
</ul>
<p>The RAN front panel display has several different display modes as indicated
by the two-digit, seven-segment display. Some of the RAN front panel display
modes are shown in <a href="#35236">Table 3</a>. <br><br>
<a name=35236> <img src=onft24.gif></a><br>
<i>Table 3: RAN Activity Codes</i><br><br>
<p>In the case of duplicate node numbers, the RAN farthest from the host
adapter will display En, instead of AC, when the system is started.
<p>The configuration for a 128-port Asynchronous adapter follows the same
sequence of steps for a normal ISA adapter; however, you can customize your
adapter port-wise. That is, you can set different characteristics for your
lines and the corresponding nodes.
<a name="htmlbot"></a>
<p><a href="./5139fm.htm#toconfH8"><img src="f2htoc.gif"></a>
<a href="./5139indx.htm"><img src="f2hindex.gif"></a>
<a href="5139c44.htm#htmltop"><img src="f2htop.gif"></a>
<a href="5139c45.htm#htmltop"><img src="f2hnext.gif">4.5  Adding a TTY
Device</a><br>
</body>
</html>

